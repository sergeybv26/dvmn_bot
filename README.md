# Телеграм-бот, отправляющий уведомления о проверке работ.

Приложение осуществляет проверку статуса проверки сданной работы через API Devman и отправляет уведомление в Телеграм при измененнии статуса.

## Основные системные требования:
* Ubuntu 20.04 LTS
* Python 3.9
* Зависимости из файла requirements.txt

## Запуск проекта
### Клонирование репозитория
Для клонирования репозитория необходимо установить git:
```shell
https://git-scm.com/downloads
```
Чтобы выполнить клонирование проекта из репозитория необходимо выполнить команду:
```shell
$ git clone https://github.com/sergeybv26/dvmn_bot.git
```
После копирования проекта из репозитория появится директория dvmn_bot

### Создание и активация виртуального окружения
```shell
$ cd dvmn_bot/
$ python3 -m venv env
$ source env/bin/activate
```
Пример строки-приглашения после выполнения команды:
```shell
(env) user@user-pc:~/dvmn_bot
```
### Установка зависимостей
```shell
$ pip3 install -r requirements.txt
```
Установка зависимостей должна завершиться сообщением: "Successfully installed ..."

### Получение чувствиетльных данных
Для работы приложения необходимо получить токен API Devman, токен телеграм-бота и id чата.

Для получения токена API Devman необходимо перейти по ссылке https://dvmn.org/api/docs/

Для получения токена телеграм-бота необходимо:
* написать боту https://telegram.me/BotFather для создания нового телеграм-бота
* написать ```/start```, затем ```/newbot```
* ввести два имени: первое - как бот будет отбражаться в списке контактов, второе - имя, по которому его можно будет найти в поиске
* в ответном сообщении получаем токен нашего бота и сохраняем его

Для получения логов администратором рекомендуется создать отдельного бота.

Для получения id чата необходимо написать специальному боту https://telegram.me/userinfobot

### Создание файла с переменными окружения
Переменные окружения для настройки проекта:
* ```API_TOKEN``` - Токен API Devman
* ```BOT_TOKEN``` - Токен телеграм-бота
* ```CHAT_ID``` - id чата
* ```ADM_BOT_TOKEN``` -Токен телеграм-бота для администратора

Создать файл .env и записать в него параметры из файла .env.sample
```shell
$ touch .env
$ nano .env
```

### Запуск приложения
Перед запуском приложения необходимо в Телеграм найти созданного бота и начать с ним чат.

Для запуска приложения необходимо в командной строке выполнить команду:
```shell
python3 main.py
```

После успешного запуска в консоли и в чате телеграм-бота выведется сообщение "Телграм-бот запущен!"
